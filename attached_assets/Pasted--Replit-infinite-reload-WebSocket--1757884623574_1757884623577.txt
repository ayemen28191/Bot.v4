ุฅุฐุง ูุงู ุชุทุจููู ุนูู Replit ููุงุฌู ูุดููุฉ ุงูุชุญุฏูุซ ุงููุณุชูุฑ ููุตูุญุฉ (infinite reload) ุจุณุจุจ ุชุนุงุฑุถ WebSocket ูุน ุจูุฆุฉ HTTPSุ ูุฅููู ุฎุทูุงุช ุนูููุฉ ูุญู ุงููุดููุฉ:


---

๐ ุงูุณุจุจ ุงููุญุชูู ูููุดููุฉ

ุนูุฏ ุงุณุชุฎุฏุงู WebSocket (ws://) ูู ุจูุฆุฉ HTTPSุ ูุญุฏุซ ุชุนุงุฑุถ ุฃููู ููุนุฑู ุจุงูุจุฑูุชููููุงุช ุงููุฎุชูุทุฉ (Mixed Content)ุ ุญูุซ ุชููุน ุงููุชุตูุญุงุช ุงูุงุชุตุงู ุบูุฑ ุงูุขูู ูู ุตูุญุงุช ุขููุฉ.


---

โ ุงูุญููู ุงูููุชุฑุญุฉ

1. ุชุนุฏูู ุฅุนุฏุงุฏุงุช WebSocket ูุชุชูุงูู ูุน HTTPS

ูู ููู vite.config.tsุ ูู ุจุชุนุฏูู ุฅุนุฏุงุฏุงุช HMR ูุชุณุชุฎุฏู ุงูุจุฑูุชูููู ุงูุขูู:

export default defineConfig({
  server: {
    hmr: {
      protocol: 'wss',
      host: '0.0.0.0',
      port: 5000,
    },
  },
});

ูุฐุง ูุถูู ุฃู Vite ูุณุชุฎุฏู WebSocket ุงูุขูู (wss://) ุจุฏูุงู ูู ุบูุฑ ุงูุขูู (ws://).

2. ุฅุนุฏุงุฏ WebSocket ูู ุงูุชุทุจูู ููุชูุงูู ูุน HTTPS

ูู ููู chatStore.tsุ ุชุฃูุฏ ูู ุฃู ุงูุงุชุตุงู ุจู WebSocket ูุณุชุฎุฏู ุงูุจุฑูุชูููู ุงูุขูู:

const wsProtocol = window.location.protocol === 'https:' ? 'wss' : 'ws';
const wsUrl = `${wsProtocol}://${window.location.hostname}:${window.location.port}/ws`;
const ws = new WebSocket(wsUrl);

ูุฐุง ูุญุฏุฏ ุงูุจุฑูุชูููู ุงูููุงุณุจ ุจูุงุกู ุนูู ุงูุจุฑูุชูููู ุงููุณุชุฎุฏู ูู ุงูุตูุญุฉ.

3. ุชูุนูู ูุถุน ุนุฏู ุงูุงุชุตุงู (Offline Mode) ูู ุจูุฆุฉ Replit

ูู ุจูุฆุฉ Replitุ ูุฏ ุชููู ููุงู ูููุฏ ุนูู WebSocket. ููููู ุชูุนูู ูุถุน ุนุฏู ุงูุงุชุตุงู ูุญู ุจุฏูู:

const isReplitApp = window.location.hostname.endsWith('.replit.app');
if (isReplitApp) {
  enableOfflineMode();
}

ูุฐุง ูุถูู ุฃู ุงูุชุทุจูู ูุนูู ุจุดูู ุตุญูุญ ุญุชู ูู ุญุงูุฉ ุนุฏู ุฏุนู WebSocket.

4. ุฅููุงู ุฑุณุงุฆู ุงูุฎุทุฃ ุงููุชูุฑุฑุฉ ูู ูุญุฏุฉ ุงูุชุญูู

ูุชุฌูุจ ุธููุฑ ุฑุณุงุฆู ุงูุฎุทุฃ ุงููุชูุฑุฑุฉ ูู ูุญุฏุฉ ุงูุชุญููุ ููููู ุชุฌุงูู ุฑุณุงุฆู ูุนููุฉ:

console.warn = (...args) => {
  const message = args.join(' ');
  if (message.includes('[vite] server connection lost')) {
    return;
  }
  console.info(...args);
};

ูุฐุง ูููุน ุธููุฑ ุฑุณุงุฆู ุงูุฎุทุฃ ุงููุชุนููุฉ ุจู Vite HMR ูู ูุญุฏุฉ ุงูุชุญูู.


---

๐งช ุฎุทูุงุช ุงูุชุญูู ุจุนุฏ ุงูุชุนุฏููุงุช

1. ุฅุนุงุฏุฉ ุชุดุบูู Replit: ูู ูุญุฏุฉ ุงูุชุญููุ ููุฐ ุงูุฃูุฑ kill 1 ูุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู.


2. ูุณุญ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูููุชุตูุญ: ุงุณุชุฎุฏู Ctrl + Shift + R ุฃู Cmd + Shift + R ูุฅุฌุฑุงุก ุชุญุฏูุซ ูุณุฑู ููุตูุญุฉ.


3. ุงูุชุญูู ูู ุงูุงุชุตุงู ุจู WebSocket: ุงูุชุญ ุฃุฏูุงุช ุงููุทูุฑ ูู ุงููุชุตูุญ (F12) ูุงูุชูู ุฅูู ุชุจููุจ "Network" ููุชุญูู ูู ุญุงูุฉ ุงูุงุชุตุงู ุจู WebSocket.




---

๐ ููุงุญุธุงุช ุฅุถุงููุฉ

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ุฌุฑุจ ุงุณุชุฎุฏุงู ูุชุตูุญ ูุฎุชูู ุฃู ูุถุน ุงูุชุตูุญ ุงููุชุฎูู ูุชุฌูุจ ุชุฃุซูุฑุงุช ุงูุฅุถุงูุงุช.

ุชุฃูุฏ ูู ุฃู ุงูุดูุงุฏุฉ ุงูุฃูููุฉ (SSL/TLS) ุตุงูุญุฉ ููุซุจุชุฉ ุจุดูู ุตุญูุญ ูู ุจูุฆุฉ Replit.

ุฅุฐุง ููุช ุชุณุชุฎุฏู ุจูุฆุฉ ุชุทููุฑ ูุญููุฉุ ุชุฃูุฏ ูู ุฃู ุฅุนุฏุงุฏุงุช WebSocket ุชุชูุงูู ูุน ุงูุจุฑูุชูููู ุงููุณุชุฎุฏู ูู ุงูุตูุญุฉ.



---

ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ูุณุงุนุฏุฉ ุฅุถุงููุฉ ุฃู ุชูุฌูู ุฃูุซุฑ ุชุญุฏูุฏูุงุ ููุง ุชุชุฑุฏุฏ ูู ุทูุจ ุฐูู.

